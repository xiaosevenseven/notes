# 浏览器工作原理与实践

进程与线程

单线程代码只能串行处理，多线程代码可以并行处理，能大大提升性能。

1. 进程中的任意一线程执行出错，都会导致整个进程的崩溃
2. 线程之间共享进程的数据
3. 当一个进程关闭之后，操作系统回收进程所占用的内容
4. 进程之间的内容是相互隔离

最新的 Chrome 浏览器包括： 一个浏览器（Browser）主进程、一个 GPU 进程、一个网络（NetWork）进程、多个渲染进程和多个插件进程。

- 浏览器进程：主要负责界面显示、用户交互、子进程管理，同事提供存储等功能
- 渲染进程：核心任务是将 HTML、CSS 和 JavaScript 转换为用户可以与之交互的网页，排版引擎 Blink 和 JavaScript 引擎 V8 都是运行在该进程中，默认情况下 Chrome 会为每个 Tab 标签创建一个浏览器进程。出于安全考虑，渲染进程都是运行在沙箱模式下。
- GPU 进程：GPU 的使用初衷是为了实现 3D CSS 的效果，只是随着网页、Chrome 的 UI 界面都适用 GPU 来绘制，这使得 GPU 成为浏览器普遍的需求。
- 网络进程：主要负责网页的网络资源加载。
- 插件进程：主要负责插件的运行，因插件容易奔溃，所以需要通过插件进程来隔离，以便保证插件进程奔溃不会对浏览器和页面造成影响。


浏览器发起 HTTP 请求流程

1. 构建请求
2. 查找缓存
3. 准备 IP 地址和端口
4. 等待 TCP 队列
5. 建立 TCP 链接
6. 发送 HTTP 请求

服务器处理 HTTP 请求流程

1. 返回请求
2. 断开连接
3. 重定向
